<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Analyze site trends in results file — anlzMWRsite • MassWateR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Analyze site trends in results file — anlzMWRsite"><meta property="og:image" content="https://massbays-tech.github.io/MassWateR/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MassWateR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9006</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/datainput.html">MassWateR data input and checks</a>
    <a class="dropdown-item" href="../articles/qcoverview.html">MassWateR quality control functions</a>
    <a class="dropdown-item" href="../articles/outlierchecks.html">MassWateR outlier checks</a>
    <a class="dropdown-item" href="../articles/analysis.html">MassWateR analyses</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/massbays-tech/MassWateR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Analyze site trends in results file</h1>
      <small class="dont-index">Source: <a href="https://github.com/massbays-tech/MassWateR/blob/HEAD/R/anlzMWRsite.R" class="external-link"><code>R/anlzMWRsite.R</code></a></small>
      <div class="d-none name"><code>anlzMWRsite.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">anlzMWRsite</span><span class="op">(</span></span>
<span>  <span class="va">res</span>,</span>
<span>  <span class="va">param</span>,</span>
<span>  <span class="va">acc</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"box"</span>, <span class="st">"bar"</span><span class="op">)</span>,</span>
<span>  thresh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fresh"</span>, <span class="st">"marine"</span>, <span class="st">"none"</span><span class="op">)</span>,</span>
<span>  threshcol <span class="op">=</span> <span class="st">"tan"</span>,</span>
<span>  site <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  resultatt <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dtrng <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  jitter <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  fill <span class="op">=</span> <span class="st">"lightgreen"</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>  yscl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"log"</span>, <span class="st">"linear"</span><span class="op">)</span>,</span>
<span>  fecalgrp <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  runchk <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  warn <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>res</dt>
<dd><p>character string of path to the results file or <code>data.frame</code> for results returned by <code><a href="readMWRresults.html">readMWRresults</a></code></p></dd>


<dt>param</dt>
<dd><p>character string of the parameter to plot, must conform to entries in the <code>"Simple Parameter"</code> column of <code><a href="paramsMWR.html">paramsMWR</a></code></p></dd>


<dt>acc</dt>
<dd><p>character string of path to the data quality objectives file for accuracy or <code>data.frame</code> returned by <code><a href="readMWRacc.html">readMWRacc</a></code></p></dd>


<dt>type</dt>
<dd><p>character indicating <code>"box"</code> for boxplots or <code>"bar"</code> for barplots, see details</p></dd>


<dt>thresh</dt>
<dd><p>character indicating if relevant freshwater or marine threshold lines are included, one of <code>"fresh"</code>, <code>"marine"</code>, or <code>"none"</code></p></dd>


<dt>threshcol</dt>
<dd><p>character indicating color of threshold lines if available</p></dd>


<dt>site</dt>
<dd><p>character string of sites to include, default all</p></dd>


<dt>resultatt</dt>
<dd><p>character string of result attributes to plot, default all</p></dd>


<dt>dtrng</dt>
<dd><p>character string of length two for the date ranges as YYYY-MM-DD, optional</p></dd>


<dt>jitter</dt>
<dd><p>logical indicating if points are jittered over the boxplots, only applies if <code>type = "boxplot"</code></p></dd>


<dt>fill</dt>
<dd><p>numeric indicating fill color for boxplots or barplots</p></dd>


<dt>alpha</dt>
<dd><p>numeric from 0 to 1 indicating transparency of fill color</p></dd>


<dt>yscl</dt>
<dd><p>character indicating one of <code>"auto"</code> (default), <code>"log"</code>, or <code>"linear"</code>, see details</p></dd>


<dt>fecalgrp</dt>
<dd><p>logical indicating if fecal indicator data have sites grouped separately by result attributes, applies if <code>param</code> is <code>"E.coli"`}, \code{"Enterococcus"}, or \code{"Fecal Coliform"}, see details}\item{runchk}{logical to run data checks with \code{<a href="checkMWRresults.html">checkMWRresults</a>}, \code{<a href="checkMWRacc.html">checkMWRacc</a>}, \code{<a href="checkMWRfrecom.html">checkMWRfrecom</a>}, applies only if \code{res}, \code{acc}, or \code{frecom} are file paths}\item{warn}{logical to return warnings to the console (default)}
}
{
A \code{<a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a>} object that can be further modified.
}
\description{
Analyze site trends in results file
}
\details{
Summaries of a parameter for each site are shown as boxplots if \code{type = "box"} or as barplots if \code{type = "bar"}.  For the latter, points can be jittered over the boxplots by setting \code{jitter = TRUE}.  For the former, 95% confidence intervals are also shown if they can be estimated (i.e., more than one result value per bar).Threshold lines applicable to marine or freshwater environments can be included in the plot by using the \code{thresh} argument.  These thresholds are specific to each parameter and can be found in the \code{<a href="thresholdMWR.html">thresholdMWR</a>} file.  Threshold lines are plotted only for those parameters with entries in \code{<a href="thresholdMWR.html">thresholdMWR</a>} and only if the value in \code{`Result Unit`} matches those in \code{<a href="thresholdMWR.html">thresholdMWR</a>}. The threshold lines can be suppressed by setting \code{thresh = 'none'}.The y-axis scaling as arithmetic (linear) or logarithmic can be set with the \code{yscl} argument.  If \code{yscl = "auto"} (default), the scaling is  determined automatically from the data quality objective file for accuracy, i.e., parameters with "log" in any of the columns are plotted on log10-scale, otherwise arithmetic. Setting \code{yscl = "linear"} or \code{yscl = "log"} will set the axis as linear or log10-scale, respectively, regardless of the information in the data quality objective file for accuracy. The means and confidence intervals will vary between arithmetic and log-scaling if \code{type = "bar"}.Any entries in \code{resdat} in the \code{"Result Value"} column as \code{"BDL"} or \code{"AQL"} are replaced with appropriate values in the \code{"Quantitation Limit"} column, if present, otherwise the \code{"MDL"} or \code{"UQL"} columns from the data quality objectives file for accuracy are used.  Values as \code{"BDL"} use one half of the appropriate limit.The \code{fecalgrp} argument can be used to group sites separately by result attributes as plot facets and applies only if \code{param} is \code{"E.coli"`</code>, <code>"Enterococcus"</code>, or <code>"Fecal Coliform"</code>.  For example, sites can be grouped by <code>"Dry"</code> or <code>"Wet"</code> conditions if present in the <code>"Result Attrbute"</code> column.</p></dd>

</dl><p># results data path
respth &lt;- system.file('extdata/ExampleResults.xlsx', package = 'MassWateR')# results data
resdat &lt;- readMWRresults(respth)# accuracy path
accpth &lt;- system.file('extdata/ExampleDQOAccuracy.xlsx', 
     package = 'MassWateR')# accuracy data
accdat &lt;- readMWRacc(accpth)# site trends, boxplot
anlzMWRsite(res = resdat, param = 'DO', acc = accdat, type = 'box')# site trends, barplot
anlzMWRsite(res = resdat, param = 'DO', acc = accdat, type = 'bar')# site trends, May to July only
anlzMWRsite(res = resdat, param = 'DO', acc = accdat, type = 'box',
     dtrng = c('2021-05-01', '2021-07-31'))# fecal grouping
anlzMWRsite(res = resdat, param = 'E.coli', acc = accdat, type = 'box', 
     site = c('ABT-077', 'ABT-162', 'CND-009', 'CND-110', 'HBS-016', 'HBS-031'),
     fecalgrp = TRUE)</p>


    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Marcus Beck, Jill Carr, Ben Wetherill, Pam DiBona.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

