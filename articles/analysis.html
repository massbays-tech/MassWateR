<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="MassWateR">
<title>MassWateR analysis functions • MassWateR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="MassWateR analysis functions">
<meta property="og:description" content="MassWateR">
<meta property="og:image" content="https://massbays-tech.github.io/MassWateR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MassWateR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9006</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/analysis.html">MassWateR analysis functions</a>
    <a class="dropdown-item" href="../articles/datainput.html">MassWateR data input and checks</a>
    <a class="dropdown-item" href="../articles/qcoverview.html">MassWateR quality control functions</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/massbays-tech/MassWateR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="analysis_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>MassWateR analysis functions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/massbays-tech/MassWateR/blob/HEAD/vignettes/analysis.Rmd" class="external-link"><code>vignettes/analysis.Rmd</code></a></small>
      <div class="d-none name"><code>analysis.Rmd</code></div>
    </div>

    
    
<p>The analysis functions in MassWateR can be used once the required data are successfully imported into R (see the <a href="https://massbays-tech.github.io/MassWateR/articles/datainput.html">data input and checks vignette</a> for an overview). The results data file that describes the monitoring data for surface waters is required to use these functions. The example data included with the package are imported here to demonstrate how to use the analysis functions:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/massbays-tech/MassWateR" class="external-link">MassWateR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># import results data</span></span>
<span><span class="va">respth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'extdata/ExampleResults.xlsx'</span>, package <span class="op">=</span> <span class="st">'MassWateR'</span><span class="op">)</span></span>
<span><span class="va">resdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readMWRresults.html">readMWRresults</a></span><span class="op">(</span><span class="va">respth</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running checks on results data...</span></span>
<span><span class="co">#&gt;  Checking column names... OK</span></span>
<span><span class="co">#&gt;  Checking all required columns are present... OK</span></span>
<span><span class="co">#&gt;  Checking valid Activity Types... OK</span></span>
<span><span class="co">#&gt;  Checking Activity Start Date formats... OK</span></span>
<span><span class="co">#&gt;  Checking Activity Start Time formats... OK</span></span>
<span><span class="co">#&gt;  Checking for non-numeric values in Activity Depth/Height Measure... OK</span></span>
<span><span class="co">#&gt;  Checking Activity Depth/Height Unit... OK</span></span>
<span><span class="co">#&gt;  Checking values in Activity Depth/Height Measure &gt; 1 m / 3.3 ft... OK</span></span>
<span><span class="co">#&gt;  Checking Activity Relative Depth Name formats... OK</span></span>
<span><span class="co">#&gt; Warning:     Checking Characteristic Name formats...</span></span>
<span><span class="co">#&gt;  Characteristic Name not used for quality control: Air Temp, Gage</span></span>
<span><span class="co">#&gt;  Checking Characteristic Name formats... WARNING</span></span>
<span><span class="co">#&gt;  Checking Result Values... OK</span></span>
<span><span class="co">#&gt;  Checking QC Reference Values... OK</span></span>
<span><span class="co">#&gt;  Checking for missing entries for Result Unit... OK</span></span>
<span><span class="co">#&gt;  Checking if more than one unit per Characteristic Name... OK</span></span>
<span><span class="co">#&gt;  Checking acceptable units for each entry in Characteristic Name... OK</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; All checks passed (1 WARNING(s))!</span></span></code></pre></div>
<div class="section level2">
<h2 id="analyzing-outliers">Analyzing outliers<a class="anchor" aria-label="anchor" href="#analyzing-outliers"></a>
</h2>
<p>Outliers can be identified using the <code><a href="../reference/anlzMWRoutlier.html">anlzMWRoutlier()</a></code> function. Evaluating data for outliers is a critical step of quality control. Although outliers are not explicitly evaluated with the formal quality control checks, the function allows a user to quickly identify them for removal or additional follow-up. Outliers are defined using the standard definition of 1.5 times the interquartile range (the 25th to 75th percentile) of a parameter, depending on the grouping type used for the function. They are visually identified as points above or below the whiskers in the boxplots that describe distribution of the data, i.e., the box defines the interquartile range, the horizontal line is the median, and the whiskers extend above and below 1.5 times the interquartile range.</p>
<p>The <code><a href="../reference/anlzMWRoutlier.html">anlzMWRoutlier()</a></code> function uses the results data as a file path or data frame as input. The results for a selected parameter are shown as boxplots, with the outliers labelled accordingly. Outliers can be shown by month using <code>type = "month"</code> or by site using <code>type = "month"</code>. Below, outliers are shown for dissolved oxygen grouped by month.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/anlzMWRoutlier.html">anlzMWRoutlier</a></span><span class="op">(</span>res <span class="op">=</span> <span class="va">resdat</span>, param <span class="op">=</span> <span class="st">'DO'</span>, type <span class="op">=</span> <span class="st">'month'</span><span class="op">)</span></span></code></pre></div>
<p><img src="analysis_files/figure-html/unnamed-chunk-3-1.png" width="768"></p>
<p>The same data are also grouped by site.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/anlzMWRoutlier.html">anlzMWRoutlier</a></span><span class="op">(</span>res <span class="op">=</span> <span class="va">resdat</span>, param <span class="op">=</span> <span class="st">'DO'</span>, type <span class="op">=</span> <span class="st">'site'</span><span class="op">)</span></span></code></pre></div>
<p><img src="analysis_files/figure-html/unnamed-chunk-4-1.png" width="768"></p>
<p>Results can also be filtered by dates using the <code>dtrng</code> argument. Note that the date format must be <code>YYYY-MM-DD</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/anlzMWRoutlier.html">anlzMWRoutlier</a></span><span class="op">(</span>res <span class="op">=</span> <span class="va">resdat</span>, param <span class="op">=</span> <span class="st">'DO'</span>, type <span class="op">=</span> <span class="st">'site'</span>, dtrng <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'2021-06-01'</span>, <span class="st">'2021-07-31'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="analysis_files/figure-html/unnamed-chunk-5-1.png" width="768"></p>
<p>Points that are not outliers can also be jittered over the boxplots using <code>jitter = TRUE</code>. Outlier labels that overlap are also offset by default. This can be suppressed using <code>repel = FALSE</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/anlzMWRoutlier.html">anlzMWRoutlier</a></span><span class="op">(</span>res <span class="op">=</span> <span class="va">resdat</span>, param <span class="op">=</span> <span class="st">'DO'</span>, type <span class="op">=</span> <span class="st">'month'</span>, jitter <span class="op">=</span> <span class="cn">TRUE</span>, repel <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="analysis_files/figure-html/unnamed-chunk-6-1.png" width="768"></p>
<p>A data frame of the identified outliers can also be returned by setting <code>outliers = TRUE</code>. This table can be used to identify the outliers in the original data for removal or additional follow-up.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/anlzMWRoutlier.html">anlzMWRoutlier</a></span><span class="op">(</span>res <span class="op">=</span> <span class="va">resdat</span>, param <span class="op">=</span> <span class="st">'DO'</span>, type <span class="op">=</span> <span class="st">'month'</span>, outliers <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 5</span></span></span>
<span><span class="co">#&gt;   `Monitoring Location ID` `Activity Start Date` `Characteristi…` `Result Value`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> SUD-293                  2021-03-21            DO                         9.32</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> LND-007                  2021-05-19            DO                         3.05</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> HBS-080P                 2021-05-19            DO                        14.4 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> HBS-080P                 2021-05-19            DO                        14.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> HBS-095P                 2021-06-14            DO                        14.7 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> SUD-005                  2021-11-14            DO                         8.44</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> HBS-016                  2021-11-14            DO                         7.11</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 1 more variable: `Result Unit` &lt;chr&gt;</span></span></span></code></pre></div>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Marcus Beck, Jill Carr, Ben Wetherill, Pam DiBona.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
