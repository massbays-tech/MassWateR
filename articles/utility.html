<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="MassWateR">
<title>MassWateR utility functions • MassWateR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="MassWateR utility functions">
<meta property="og:description" content="MassWateR">
<meta property="og:image" content="https://massbays-tech.github.io/MassWateR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MassWateR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.2.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/MassWateR.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/inputs.html">MassWateR data input and checks</a>
    <a class="dropdown-item" href="../articles/outlierchecks.html">MassWateR outlier checks</a>
    <a class="dropdown-item" href="../articles/qcoverview.html">MassWateR quality control functions</a>
    <a class="dropdown-item" href="../articles/analysis.html">MassWateR analyses</a>
    <a class="dropdown-item" href="../articles/utility.html">MassWateR utility functions</a>
    <a class="dropdown-item" href="../articles/modifying.html">Modifying plots</a>
    <a class="dropdown-item" href="../articles/wqx.html">Water Quality Exchange output</a>
    <a class="dropdown-item" href="../articles/outofstate.html">Out of state?</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../RESOURCES.html">Resources</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/massbays-tech/MassWateR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>MassWateR utility functions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/massbays-tech/MassWateR/blob/HEAD/vignettes/utility.Rmd" class="external-link"><code>vignettes/utility.Rmd</code></a></small>
      <div class="d-none name"><code>utility.Rmd</code></div>
    </div>

    
    
<p>The MassWateR package includes several “utility” functions (using the
<code>util</code> prefix) that are used internally inside other
functions to accomplish routine tasks. Although these functions will
typically not be used by themselves, they may be useful for custom
analyses. The full list of utility functions can be viewed on the <a href="https://massbays-tech.github.io/MassWateR/reference/index.html#utility-functions">functions</a>
page. Some of these are described below.</p>
<p>Most of the utility functions require only the results data, data
quality objectives file for accuracy, or the site metadata file. Note
that all of the utility functions require data as input, whereas most of
the primary MassWateR functions can accept a file path or the data.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">MassWateR</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># import results data</span></span>
<span><span class="va">respth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ExampleResults.xlsx"</span>, package <span class="op">=</span> <span class="st">"MassWateR"</span><span class="op">)</span></span>
<span><span class="va">resdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readMWRresults.html">readMWRresults</a></span><span class="op">(</span><span class="va">respth</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running checks on results data...</span></span>
<span><span class="co">#&gt;  Checking column names... OK</span></span>
<span><span class="co">#&gt;  Checking all required columns are present... OK</span></span>
<span><span class="co">#&gt;  Checking valid Activity Types... OK</span></span>
<span><span class="co">#&gt;  Checking Activity Start Date formats... OK</span></span>
<span><span class="co">#&gt;  Checking depth data present... OK</span></span>
<span><span class="co">#&gt;  Checking for non-numeric values in Activity Depth/Height Measure... OK</span></span>
<span><span class="co">#&gt;  Checking Activity Depth/Height Unit... OK</span></span>
<span><span class="co">#&gt;  Checking Activity Relative Depth Name formats... OK</span></span>
<span><span class="co">#&gt;  Checking values in Activity Depth/Height Measure &gt; 1 m / 3.3 ft... OK</span></span>
<span><span class="co">#&gt;  Checking Characteristic Name formats... OK</span></span>
<span><span class="co">#&gt;  Checking Result Values... OK</span></span>
<span><span class="co">#&gt;  Checking QC Reference Values... OK</span></span>
<span><span class="co">#&gt;  Checking for missing entries for Result Unit... OK</span></span>
<span><span class="co">#&gt;  Checking if more than one unit per Characteristic Name... OK</span></span>
<span><span class="co">#&gt;  Checking acceptable units for each entry in Characteristic Name... OK</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; All checks passed!</span></span>
<span></span>
<span><span class="co"># import accuracy data</span></span>
<span><span class="va">accpth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ExampleDQOAccuracy.xlsx"</span>, package <span class="op">=</span> <span class="st">"MassWateR"</span><span class="op">)</span></span>
<span><span class="va">accdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readMWRacc.html">readMWRacc</a></span><span class="op">(</span><span class="va">accpth</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running checks on data quality objectives for accuracy...</span></span>
<span><span class="co">#&gt;  Checking column names... OK</span></span>
<span><span class="co">#&gt;  Checking all required columns are present... OK</span></span>
<span><span class="co">#&gt;  Checking column types... OK</span></span>
<span><span class="co">#&gt;  Checking for text other than &lt;=, ≤, &lt;, &gt;=, ≥, &gt;, ±, %, AQL, BQL, log, or all... OK</span></span>
<span><span class="co">#&gt;  Checking Parameter formats... OK</span></span>
<span><span class="co">#&gt;  Checking for missing entries for unit (uom)... OK</span></span>
<span><span class="co">#&gt;  Checking if more than one unit (uom) per Parameter... OK</span></span>
<span><span class="co">#&gt;  Checking acceptable units (uom) for each entry in Parameter... OK</span></span>
<span><span class="co">#&gt;  Checking empty columns... OK</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; All checks passed!</span></span>
<span></span>
<span><span class="co"># import site metadata</span></span>
<span><span class="va">sitpth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ExampleSites.xlsx"</span>, package <span class="op">=</span> <span class="st">"MassWateR"</span><span class="op">)</span></span>
<span><span class="va">sitdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readMWRsites.html">readMWRsites</a></span><span class="op">(</span><span class="va">sitpth</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running checks on site metadata...</span></span>
<span><span class="co">#&gt;  Checking column names... OK</span></span>
<span><span class="co">#&gt;  Checking all required columns are present... OK</span></span>
<span><span class="co">#&gt;  Checking for missing latitude or longitude values... OK</span></span>
<span><span class="co">#&gt;  Checking for non-numeric values in latitude... OK</span></span>
<span><span class="co">#&gt;  Checking for non-numeric values in longitude... OK</span></span>
<span><span class="co">#&gt;  Checking for positive values in longitude... OK</span></span>
<span><span class="co">#&gt;  Checking for missing entries for Monitoring Location ID... OK</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; All checks passed!</span></span></code></pre></div>
<div class="section level2">
<h2 id="fill-data-outside-of-detection-or-quantitation-limit">Fill data outside of detection or quantitation limit<a class="anchor" aria-label="anchor" href="#fill-data-outside-of-detection-or-quantitation-limit"></a>
</h2>
<p>The <code><a href="../reference/utilMWRlimits.html">utilMWRlimits()</a></code> function replaces any text
qualifiers in the <code>"Result Value"</code> column of the results file
that are outside of detection (<code>"BDL"</code> or <code>"AQL"</code>)
with appropriate numeric values. The values are replaced with those from
the <code>"Quanitation Limit"</code> column, if present, otherwise the
<code>"MDL"</code> or <code>"UQL"</code> columns from the data quality
objectives file for accuracy are used. Values as <code>"BDL"</code> use
one half of the appropriate limit. The output only includes rows with
the activity type as <code>"Field Msr/Obs"</code> or
<code>"Sample-Routine"</code> and is filtered by the chosen parameter.
The function can be useful for analysis because the measurements are
returned as numeric values (e.g., for plotting).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/utilMWRlimits.html">utilMWRlimits</a></span><span class="op">(</span>resdat <span class="op">=</span> <span class="va">resdat</span>, accdat <span class="op">=</span> <span class="va">accdat</span>, param <span class="op">=</span> <span class="st">'TP'</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 48 × 18</span></span></span>
<span><span class="co">#&gt;    `Monitoring Location ID` `Activity Type` `Activity Start Date`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ABT-026                  Sample-Routine  2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ABT-077                  Sample-Routine  2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> ABT-301                  Sample-Routine  2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ABT-312                  Sample-Routine  2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> DAN-013                  Sample-Routine  2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ELZ-004                  Sample-Routine  2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> HOP-011                  Sample-Routine  2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> NSH-002                  Sample-Routine  2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ABT-026                  Sample-Routine  2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ABT-062                  Sample-Routine  2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 38 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 15 more variables: `Activity Start Time` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Activity Depth/Height Measure` &lt;chr&gt;, `Activity Depth/Height Unit` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Activity Relative Depth Name` &lt;chr&gt;, `Characteristic Name` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Result Value` &lt;dbl&gt;, `Result Unit` &lt;chr&gt;, `Quantitation Limit` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `QC Reference Value` &lt;chr&gt;, `Result Measure Qualifier` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Result Attribute` &lt;chr&gt;, `Sample Collection Method ID` &lt;chr&gt;, …</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="filter-results-data">Filter results data<a class="anchor" aria-label="anchor" href="#filter-results-data"></a>
</h2>
<p>The <code><a href="../reference/utilMWRfilter.html">utilMWRfilter()</a></code> function filters rows in the results
data by parameter, date range, sites, result attributes, and/or location
groups. No other changes to the data are made other than filtering the
relevant rows based on the input. The function is designed to provide
informative errors, e.g., the available result attributes will be shown
in the error if the attribute provided is invalid. Filtering by location
group requires the site metadata file.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># filter by parameter, date range</span></span>
<span><span class="fu"><a href="../reference/utilMWRfilter.html">utilMWRfilter</a></span><span class="op">(</span>resdat <span class="op">=</span> <span class="va">resdat</span>, param <span class="op">=</span> <span class="st">'DO'</span>, dtrng <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'2022-06-01'</span>, <span class="st">'2022-06-30'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 18</span></span></span>
<span><span class="co">#&gt;    `Monitoring Location ID` `Activity Type` `Activity Start Date`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ABT-026                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ABT-062                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> ABT-077                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ABT-144                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ABT-237                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ABT-301                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ABT-312                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> DAN-013                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ELZ-004                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> HOP-011                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> NSH-002                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 15 more variables: `Activity Start Time` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Activity Depth/Height Measure` &lt;chr&gt;, `Activity Depth/Height Unit` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Activity Relative Depth Name` &lt;chr&gt;, `Characteristic Name` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Result Value` &lt;chr&gt;, `Result Unit` &lt;chr&gt;, `Quantitation Limit` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `QC Reference Value` &lt;chr&gt;, `Result Measure Qualifier` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Result Attribute` &lt;chr&gt;, `Sample Collection Method ID` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Project ID` &lt;chr&gt;, `Local Record ID` &lt;chr&gt;, `Result Comment` &lt;chr&gt;</span></span></span>
<span></span>
<span><span class="co"># filter by parameter, site</span></span>
<span><span class="fu"><a href="../reference/utilMWRfilter.html">utilMWRfilter</a></span><span class="op">(</span>resdat <span class="op">=</span> <span class="va">resdat</span>, param <span class="op">=</span> <span class="st">'DO'</span>, site <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'ABT-026'</span>, <span class="st">'ABT-062'</span>, <span class="st">'ABT-077'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 13 × 18</span></span></span>
<span><span class="co">#&gt;    `Monitoring Location ID` `Activity Type` `Activity Start Date`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ABT-026                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ABT-077                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> ABT-026                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ABT-062                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ABT-077                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ABT-026                  Field Msr/Obs   2022-07-17           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ABT-062                  Field Msr/Obs   2022-07-17           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> ABT-077                  Field Msr/Obs   2022-07-17           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ABT-026                  Field Msr/Obs   2022-08-14           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ABT-062                  Field Msr/Obs   2022-08-14           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> ABT-077                  Field Msr/Obs   2022-08-14           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> ABT-026                  Field Msr/Obs   2022-09-11           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> ABT-077                  Field Msr/Obs   2022-09-11           </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 15 more variables: `Activity Start Time` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Activity Depth/Height Measure` &lt;chr&gt;, `Activity Depth/Height Unit` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Activity Relative Depth Name` &lt;chr&gt;, `Characteristic Name` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Result Value` &lt;chr&gt;, `Result Unit` &lt;chr&gt;, `Quantitation Limit` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `QC Reference Value` &lt;chr&gt;, `Result Measure Qualifier` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Result Attribute` &lt;chr&gt;, `Sample Collection Method ID` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Project ID` &lt;chr&gt;, `Local Record ID` &lt;chr&gt;, `Result Comment` &lt;chr&gt;</span></span></span>
<span></span>
<span><span class="co"># filter by parameter, result attribute</span></span>
<span><span class="fu"><a href="../reference/utilMWRfilter.html">utilMWRfilter</a></span><span class="op">(</span>resdat <span class="op">=</span> <span class="va">resdat</span>, param <span class="op">=</span> <span class="st">'DO'</span>, resultatt <span class="op">=</span> <span class="st">'DRY'</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 27 × 18</span></span></span>
<span><span class="co">#&gt;    `Monitoring Location ID` `Activity Type` `Activity Start Date`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ABT-026                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ABT-077                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> ABT-301                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ABT-312                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> DAN-013                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ELZ-004                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> HOP-011                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> NSH-002                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ABT-026                  Field Msr/Obs   2022-08-14           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ABT-062                  Field Msr/Obs   2022-08-14           </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 17 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 15 more variables: `Activity Start Time` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Activity Depth/Height Measure` &lt;chr&gt;, `Activity Depth/Height Unit` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Activity Relative Depth Name` &lt;chr&gt;, `Characteristic Name` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Result Value` &lt;chr&gt;, `Result Unit` &lt;chr&gt;, `Quantitation Limit` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `QC Reference Value` &lt;chr&gt;, `Result Measure Qualifier` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Result Attribute` &lt;chr&gt;, `Sample Collection Method ID` &lt;chr&gt;, …</span></span></span>
<span></span>
<span><span class="co"># filter by parameter, location group, date range</span></span>
<span><span class="fu"><a href="../reference/utilMWRfilter.html">utilMWRfilter</a></span><span class="op">(</span>resdat <span class="op">=</span> <span class="va">resdat</span>, param <span class="op">=</span> <span class="st">'DO'</span>, sitdat <span class="op">=</span> <span class="va">sitdat</span>,</span>
<span>     locgroup <span class="op">=</span> <span class="st">'Assabet'</span>, dtrng <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'2022-06-01'</span>, <span class="st">'2022-06-30'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 19</span></span></span>
<span><span class="co">#&gt;   `Monitoring Location ID` `Activity Type` `Activity Start Date`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ABT-026                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> ABT-062                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ABT-077                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> ABT-144                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ABT-237                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> ABT-301                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> ABT-312                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 16 more variables: `Activity Start Time` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Activity Depth/Height Measure` &lt;chr&gt;, `Activity Depth/Height Unit` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Activity Relative Depth Name` &lt;chr&gt;, `Characteristic Name` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Result Value` &lt;chr&gt;, `Result Unit` &lt;chr&gt;, `Quantitation Limit` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `QC Reference Value` &lt;chr&gt;, `Result Measure Qualifier` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Result Attribute` &lt;chr&gt;, `Sample Collection Method ID` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Project ID` &lt;chr&gt;, `Local Record ID` &lt;chr&gt;, `Result Comment` &lt;chr&gt;, …</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-means-and-confidence-intervals">Get means and confidence intervals<a class="anchor" aria-label="anchor" href="#get-means-and-confidence-intervals"></a>
</h2>
<p>The <code><a href="../reference/utilMWRconfint.html">utilMWRconfint()</a></code> function estimates means and
confidence intervals for arbitrary groups in the results data, e.g.,
sites across dates. The <code><a href="../reference/utilMWRlimits.html">utilMWRlimits()</a></code> function must be
used first and a grouping variable must be specified using
<code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by()</a></code> from the <a href="https://dplyr.tidyverse.org/" target="_blank" class="external-link">dplyr</a> package (included with MassWateR). Arithmetic
or geometric means and their confidence intervals can be returned using
the <code>logscl</code> argument.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># fill BDL, AQL</span></span>
<span><span class="va">resdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/utilMWRlimits.html">utilMWRlimits</a></span><span class="op">(</span>resdat <span class="op">=</span> <span class="va">resdat</span>, accdat <span class="op">=</span> <span class="va">accdat</span>, param <span class="op">=</span> <span class="st">"DO"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># identify site as grouping variable</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">resdat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">`Monitoring Location ID`</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># arithmetic means   </span></span>
<span><span class="fu"><a href="../reference/utilMWRconfint.html">utilMWRconfint</a></span><span class="op">(</span><span class="va">dat</span>, logscl <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 4</span></span></span>
<span><span class="co">#&gt;    `Monitoring Location ID`   lov   hiv `Result Value`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ABT-026                   6.62  7.99           7.31</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ABT-062                   6.00  9.54           7.77</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> ABT-077                   7.88  9.36           8.62</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ABT-144                   7.22  8.86           8.04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ABT-237                   3.81  9.27           6.54</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ABT-301                   6.00  8.08           7.04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ABT-312                   6.36  8.10           7.23</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> DAN-013                   2.89  9.83           6.36</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ELZ-004                   3.48  6.56           5.02</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> HOP-011                   4.43  9.83           7.13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> NSH-002                   4.00  8.77           6.38</span></span>
<span></span>
<span><span class="co"># geometric means</span></span>
<span><span class="fu"><a href="../reference/utilMWRconfint.html">utilMWRconfint</a></span><span class="op">(</span><span class="va">dat</span>, logscl <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 4</span></span></span>
<span><span class="co">#&gt;    `Monitoring Location ID`   lov   hiv `Result Value`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ABT-026                   6.61  8.03           7.29</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ABT-062                   6.19  9.71           7.75</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> ABT-077                   7.89  9.38           8.60</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ABT-144                   7.27  8.89           8.04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ABT-237                   4.34  9.68           6.48</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ABT-301                   6.01  8.15           7.00</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ABT-312                   6.34  8.18           7.20</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> DAN-013                   2.71 11.8            5.67</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ELZ-004                   3.64  6.60           4.90</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> HOP-011                   4.48 10.4            6.83</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> NSH-002                   4.08  9.20           6.13</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-surface-measurements-only">Get surface measurements only<a class="anchor" aria-label="anchor" href="#get-surface-measurements-only"></a>
</h2>
<p>The <code><a href="../reference/utilMWRfiltersurface.html">utilMWRfiltersurface()</a></code> functions returns only
surface measurements from the results data. The function will filter the
results where <code>"Activity Depth/Height Measure"</code> is less than
or equal to 1 meter or 3.3 feet or the
<code>"Activity Relative Depth Name"</code> is <code>"Surface"</code>,
where the latter takes precedent.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/utilMWRfiltersurface.html">utilMWRfiltersurface</a></span><span class="op">(</span>resdat <span class="op">=</span> <span class="va">resdat</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 49 × 18</span></span></span>
<span><span class="co">#&gt;    `Monitoring Location ID` `Activity Type` `Activity Start Date`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ABT-026                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ABT-077                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> ABT-301                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ABT-312                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> DAN-013                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ELZ-004                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> HOP-011                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> NSH-002                  Field Msr/Obs   2022-05-15           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ABT-026                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ABT-062                  Field Msr/Obs   2022-06-12           </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 39 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 15 more variables: `Activity Start Time` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Activity Depth/Height Measure` &lt;chr&gt;, `Activity Depth/Height Unit` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Activity Relative Depth Name` &lt;chr&gt;, `Characteristic Name` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Result Value` &lt;dbl&gt;, `Result Unit` &lt;chr&gt;, `Quantitation Limit` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `QC Reference Value` &lt;chr&gt;, `Result Measure Qualifier` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Result Attribute` &lt;chr&gt;, `Sample Collection Method ID` &lt;chr&gt;, …</span></span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Marcus Beck, Jill Carr, Ben Wetherill, Pam DiBona.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
